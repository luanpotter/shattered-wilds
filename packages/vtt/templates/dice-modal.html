<div class="dice-roll-modal">
	<form class="dice-roll-form">
		<!-- Header Section -->
		<div class="roll-header">
			<h3>{{statType}} Check [{{totalModifier}}]</h3>
			{{#each modifiers}}
			<div><strong>{{this.name}}:</strong> {{this.value}}</div>
			{{/each}}
		</div>

		<!-- Main Options Section -->
		<div class="roll-options">
			<!-- Extra Die Section (only for skills) -->
			{{#if canUseExtra}}
			<div class="option-group">
				<label class="checkbox-container">
					<input type="checkbox" name="useExtra">
					<span class="checkmark"></span>
					Use Extra Die
				</label>
				<div class="sub-option">
					<label for="extraAttribute">Attribute:</label>
					<select name="extraAttribute" disabled>
						{{#each attributeOptions}}
						<option value="{{key}}">{{name}} ({{value}})</option>
						{{/each}}
					</select>
					<small class="help-text">Extra die must roll ≤ selected attribute</small>
				</div>
			</div>
			{{/if}}

			<!-- Luck Die Section -->
			{{#if canUseLuck}}
			<div class="option-group">
				<label class="checkbox-container">
					<input type="checkbox" name="useLuck">
					<span class="checkmark"></span>
					Use Luck Die
				</label>
				<div class="sub-option">
					<small class="help-text">Luck die must roll ≤ Fortune ({{fortuneValue}})</small>
				</div>
			</div>
			{{/if}}

			<!-- Circumstance Modifier Section -->
			<div class="option-group">
				<label for="circumstanceModifier">Circumstance Modifier:</label>
				<input type="number" name="circumstanceModifier" value="0" step="1">
				<small class="help-text">Additional bonus/penalty to the roll</small>
			</div>

			<!-- Target DC Section -->
			<div class="option-group">
				<label for="targetDC">Target DC (optional):</label>
				<input type="number" name="targetDC" placeholder="Leave empty for no target" min="1" step="1" {{#if targetDC}}value="{{targetDC}}"{{/if}}>
				<small class="help-text">Difficulty Class to beat</small>
			</div>
		</div>

		<!-- Action Buttons -->
		<div class="modal-actions">
			<button type="button" class="btn btn-secondary" data-action="cancel">
				<i class="fas fa-times"></i> Cancel
			</button>
			<button type="submit" class="btn btn-primary">
				<i class="fas fa-dice-d12"></i> Roll Dice
			</button>
		</div>
	</form>
</div>
