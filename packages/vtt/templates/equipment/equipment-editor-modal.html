<div class="sw-equipment-editor-modal">
	<div class="sw-modal__body">
		<div class="sw-form-field">
			<label for="equipment-name">Name</label>
			<input id="equipment-name" class="sw-input" type="text" value="{{name}}" data-field="name" autocomplete="off" />
		</div>

		{{#if hasTraits}}
		<div class="sw-form-field">
			<label>Traits</label>
			<div class="sw-checkbox-list">
				{{#each traitOptions}}
				<label class="sw-checkbox-chip">
					<input type="checkbox" data-action="toggle-trait" data-trait="{{value}}" {{#if checked}}checked{{/if}} />
					<span>{{label}}</span>
				</label>
				{{/each}}
			</div>
		</div>
		{{/if}}

		<div class="sw-panel">
			<div class="sw-panel__header">
				<h3 class="sw-panel__title">Item Modes</h3>
				<div class="sw-add-mode-controls">
					<select class="sw-select sw-select--inline" data-field="newModeType">
						{{#each modeTypeOptions}}
						<option value="{{value}}">{{label}}</option>
						{{/each}}
					</select>
					<button type="button" class="sw-button" data-action="add-mode">
						<i class="fas fa-plus"></i> Add Mode
					</button>
				</div>
			</div>
			<div class="sw-panel__body">
				{{#if hasModes}}
				{{#each modes}}
				<div class="sw-mode-row" data-mode-type="{{modeType}}">
					<div class="sw-mode-row__header">
						<span class="sw-mode-row__label">{{modeTypeLabel}}</span>
						<button type="button" class="sw-button sw-button--icon sw-button--danger" data-action="remove-mode" data-mode-index="{{index}}">
							<i class="fas fa-trash"></i>
						</button>
					</div>
					<div class="sw-mode-row__fields">
						{{#if isWeapon}}
						<div class="sw-form-field">
							<label>Type</label>
							<select class="sw-select" data-mode-field="type" data-mode-index="{{index}}">
								{{#each typeOptions}}
								<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
								{{/each}}
							</select>
						</div>
						<div class="sw-form-field">
							<label>Bonus</label>
							<input class="sw-input" type="number" data-mode-field="bonus" data-mode-index="{{index}}" value="{{bonus}}" />
						</div>
						<div class="sw-form-field">
							<label>Range (Hexes)</label>
							<input class="sw-input" type="number" min="1" data-mode-field="range" data-mode-index="{{index}}" value="{{range}}" />
						</div>
						{{/if}}

						{{#if isArmor}}
						<div class="sw-form-field">
							<label>Type</label>
							<select class="sw-select" data-mode-field="type" data-mode-index="{{index}}">
								{{#each typeOptions}}
								<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
								{{/each}}
							</select>
						</div>
						<div class="sw-form-field">
							<label>Bonus</label>
							<input class="sw-input" type="number" data-mode-field="bonus" data-mode-index="{{index}}" value="{{bonus}}" />
						</div>
						<div class="sw-form-field">
							<label>DEX Penalty</label>
							<input class="sw-input" type="number" data-mode-field="dexPenalty" data-mode-index="{{index}}" value="{{dexPenalty}}" />
						</div>
						{{/if}}

						{{#if isShield}}
						<div class="sw-form-field">
							<label>Type</label>
							<select class="sw-select" data-mode-field="type" data-mode-index="{{index}}">
								{{#each typeOptions}}
								<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
								{{/each}}
							</select>
						</div>
						<div class="sw-form-field">
							<label>Bonus</label>
							<input class="sw-input" type="number" data-mode-field="bonus" data-mode-index="{{index}}" value="{{bonus}}" />
						</div>
						{{/if}}

						{{#if isArcane}}
						<div class="sw-form-field">
							<label>Type</label>
							<select class="sw-select" data-mode-field="componentType" data-mode-index="{{index}}">
								{{#each componentTypeOptions}}
								<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
								{{/each}}
							</select>
						</div>
						<div class="sw-form-field">
							<label>Bonus</label>
							<input class="sw-input" type="number" data-mode-field="bonus" data-mode-index="{{index}}" value="{{bonus}}" />
						</div>
						<div class="sw-form-field">
							<label>SP Cost</label>
							<input class="sw-input" type="number" min="0" data-mode-field="spCost" data-mode-index="{{index}}" value="{{spCost}}" />
						</div>
						<div class="sw-form-field sw-form-field--full">
							<label>Category</label>
							<input class="sw-input" type="text" data-mode-field="category" data-mode-index="{{index}}" value="{{category}}" placeholder="Optional description" />
						</div>
						{{/if}}
					</div>
				</div>
				{{/each}}
				{{else}}
				<p class="sw-empty-state">No modes added. Add a mode to define item capabilities.</p>
				{{/if}}
			</div>
		</div>
	</div>

	<div class="sw-inline-message" data-variant="warning" data-role="validation-message" {{#unless validationMessage}}style="display: none;"{{/unless}}>
		{{validationMessage}}
	</div>

	<div class="sw-inline-message" data-variant="error" data-role="submission-error" {{#unless submissionError}}style="display: none;"{{/unless}}>
		{{submissionError}}
	</div>

	<footer class="sw-modal__footer">
		{{#if canDelete}}
		<button type="button" class="sw-button sw-button--danger" data-action="delete">
			<i class="fas fa-trash"></i> Delete
		</button>
		{{/if}}
		<button type="button" class="sw-button" data-action="cancel">Cancel</button>
		<button type="button" class="sw-button sw-button--primary" data-action="submit" {{#unless canSubmit}}disabled{{/unless}}>{{submitLabel}}</button>
	</footer>
</div>
