<div class="sw-equipment-editor-modal">
	<div class="sw-equipment-editor-body">
		<div class="sw-field">
			<label for="equipment-name">Name</label>
			<input id="equipment-name" type="text" value="{{name}}" data-field="name" autocomplete="off" />
		</div>

		<div class="sw-field">
			<label for="equipment-kind">Item Type</label>
			<select id="equipment-kind" data-field="kind">
				{{#each kindOptions}}
				<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
				{{/each}}
			</select>
		</div>

		{{#if hasTraits}}
		<div class="sw-field">
			<label>Traits</label>
			<div class="sw-trait-grid">
				{{#each traitOptions}}
				<label class="sw-trait-option">
					<input type="checkbox" data-action="toggle-trait" data-trait="{{value}}" {{#if checked}}checked{{/if}} />
					<span>{{label}}</span>
				</label>
				{{/each}}
			</div>
		</div>
		{{/if}}

		{{#if isWeapon}}
		<div class="sw-section">
			<div class="sw-section-header">
				<h3>Weapon Modes</h3>
				<button type="button" class="sw-button secondary" data-action="add-weapon-mode">
					<i class="fas fa-plus"></i> Add Mode
				</button>
			</div>
			<div class="sw-section-body">
				{{#each weaponModes}}
				<div class="sw-weapon-mode-row">
					<div class="sw-field">
						<label>Type</label>
						<select data-mode-field="type" data-mode-index="{{index}}">
							{{#each typeOptions}}
							<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
							{{/each}}
						</select>
					</div>
					<div class="sw-field">
						<label>Bonus</label>
						<input type="number" data-mode-field="bonus" data-mode-index="{{index}}" value="{{bonus}}" />
					</div>
					<div class="sw-field">
						<label>Range</label>
						<input type="number" min="1" data-mode-field="range" data-mode-index="{{index}}" value="{{range}}" />
					</div>
					<button type="button" class="sw-button icon danger" data-action="remove-weapon-mode" data-mode-index="{{index}}">
						<i class="fas fa-trash"></i>
					</button>
				</div>
				{{/each}}
			</div>
		</div>
		{{/if}}

		{{#if isArmor}}
		<div class="sw-section">
			<h3>Armor Details</h3>
			<div class="sw-grid">
				<div class="sw-field">
					<label>Type</label>
					<select data-field="armorType">
						{{#each armorOptions.typeOptions}}
						<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
						{{/each}}
					</select>
				</div>
				<div class="sw-field">
					<label>Bonus</label>
					<input type="number" data-field="armorBonus" value="{{armorOptions.bonus}}" />
				</div>
				<div class="sw-field">
					<label>DEX Penalty</label>
					<input type="number" data-field="armorDexPenalty" value="{{armorOptions.dexPenalty}}" />
				</div>
			</div>
		</div>
		{{/if}}

		{{#if isShield}}
		<div class="sw-section">
			<h3>Shield Details</h3>
			<div class="sw-grid">
				<div class="sw-field">
					<label>Type</label>
					<select data-field="shieldType">
						{{#each shieldOptions.typeOptions}}
						<option value="{{value}}" {{#if selected}}selected{{/if}}>{{label}}</option>
						{{/each}}
					</select>
				</div>
				<div class="sw-field">
					<label>Bonus</label>
					<input type="number" data-field="shieldBonus" value="{{shieldOptions.bonus}}" />
				</div>
			</div>
		</div>
		{{/if}}

		{{#if isArcaneFocus}}
		<div class="sw-section">
			<h3>Arcane Focus</h3>
			<div class="sw-grid">
				<div class="sw-field">
					<label>Bonus</label>
					<input type="number" data-field="focusBonus" value="{{arcaneFocusOptions.bonus}}" />
				</div>
				<div class="sw-field">
					<label>SP Cost</label>
					<input type="number" min="0" data-field="focusSpCost" value="{{arcaneFocusOptions.spCost}}" />
				</div>
			</div>
			<div class="sw-field">
				<label>Details</label>
				<input type="text" data-field="focusDetails" value="{{arcaneFocusOptions.details}}" placeholder="Optional description" />
			</div>
		</div>
		{{/if}}

		{{#if isOther}}
		<div class="sw-section">
			<h3>Item Details</h3>
			<div class="sw-field">
				<label>Details</label>
				<input type="text" data-field="otherDetails" value="{{otherDetails}}" placeholder="Optional description" />
			</div>
		</div>
		{{/if}}
	</div>

	<div class="sw-equipment-editor-validation" data-role="validation-message" {{#unless validationMessage}}style="display: none;"{{/unless}}>
		{{validationMessage}}
	</div>

	<div class="sw-equipment-editor-error" data-role="submission-error" {{#unless submissionError}}style="display: none;"{{/unless}}>
		{{submissionError}}
	</div>

	<footer class="sw-equipment-editor-footer">
		{{#if canDelete}}
		<button type="button" class="sw-button danger" data-action="delete">
			<i class="fas fa-trash"></i> Delete
		</button>
		{{/if}}
		<button type="button" class="sw-button secondary" data-action="cancel">Cancel</button>
		<button type="button" class="sw-button primary" data-action="submit" {{#unless canSubmit}}disabled{{/unless}}>{{submitLabel}}</button>
	</footer>
</div>
