<div class="shattered-wilds-sheet">
	<form class="actor-sheet">
		<section class="sheet-body">
			{{#if characterSheet}}
			<div class="character-info">
				<div class="character-header">
					<div class="character-title">
						<strong>{{characterSheet.name}}</strong> - {{characterSheet.race.primaryRace}}{{#if characterSheet.race.halfRace}} / {{characterSheet.race.halfRace}}{{/if}} {{characterSheet.characterClass.characterClass}} (Level {{characterSheet.level}})
					</div>
					<div class="header-controls">
						<button type="button" data-action="sw-import"><i class="fas fa-upload"></i> Import</button>
						<button type="button" data-action="sw-export"><i class="fas fa-download"></i> Export</button>
					</div>
				</div>
		
				<!-- Derived Stats Row -->
				{{#if derivedStatsData}}
				<div class="derived-stats-row">
					{{#each derivedStatsData}}
					<div class="derived-stat-item">
						<span class="derived-stat-label">{{name}}</span>
						{{#if clickable}}
						<div class="derived-stat-value clickable" data-action="roll-derived-stat" data-derived-stat="{{key}}" title="{{description}} • Click for modal • Shift+Click for quick roll">
							{{value}}
							<i class="fas fa-dice-d12 dice-icon"></i>
						</div>
						{{else}}
						<span class="derived-stat-value" title="{{description}}">{{value}}</span>
						{{/if}}
					</div>
					{{/each}}
				</div>
				{{/if}}
		
				<div class="resources-row">
					{{#each resourcesArray}}
					<div class="resource-control">
						<span class="resource-label" title="{{fullName}}">{{shortCode}}</span>
						<div class="resource-buttons">
							<button type="button" class="resource-btn minus" data-action="resource-change" data-resource="{{key}}" data-delta="-1">
								<i class="fas fa-minus"></i>
							</button>
							<span class="resource-value">{{current}}/{{max}}</span>
							<button type="button" class="resource-btn plus" data-action="resource-change" data-resource="{{key}}" data-delta="1">
								<i class="fas fa-plus"></i>
							</button>
						</div>
					</div>
					{{/each}}
				</div>
			</div>

			<!-- Conditions Tracker -->
			<div class="conditions-row">
				{{#each conditionsData}}
				<label class="condition-item" title="{{description}}">
					<input type="checkbox"
						data-action="toggle-condition"
						data-condition="{{key}}"
						{{#if active}}checked{{/if}}>
					<span class="condition-icon">
						<i class="{{icon}}"></i>
					</span>
					<span class="condition-name">{{name}}</span>
				</label>
				{{/each}}
			</div>

			<!-- Tab Navigation -->
			<div class="tabs-container">
				<div class="tab-buttons">
					<button type="button" class="tab-button {{#if isStatsTabActive}}active{{/if}}" data-tab="stats" title="Stats">
						<i class="fas fa-sitemap"></i>
					</button>
					<button type="button" class="tab-button {{#if isCircumstancesTabActive}}active{{/if}}" data-tab="circumstances" title="Circumstances">
						<i class="fas fa-sliders"></i>
					</button>
					<button type="button" class="tab-button {{#if isFeatsTabActive}}active{{/if}}" data-tab="feats" title="Feats">
						<i class="fas fa-star"></i>
					</button>
					<button type="button" class="tab-button {{#if isEquipmentTabActive}}active{{/if}}" data-tab="equipment" title="Equipment">
						<i class="fas fa-sword"></i>
					</button>
					<button type="button" class="tab-button {{#if isActionsTabActive}}active{{/if}}" data-tab="actions" title="Actions">
						<i class="fas fa-fist-raised"></i>
					</button>
					{{#if arcaneData}}
					<button type="button" class="tab-button {{#if isArcaneTabActive}}active{{/if}}" data-tab="arcane" title="Arcane">
						<i class="fas fa-magic"></i>
					</button>
					{{/if}}
					{{#if divineData}}
					<button type="button" class="tab-button {{#if isDivineTabActive}}active{{/if}}" data-tab="divine" title="Divine">
						<i class="fas fa-praying-hands"></i>
					</button>
					{{/if}}
					<button type="button" class="tab-button {{#if isPersonalityTabActive}}active{{/if}}" data-tab="personality" title="Personality">
						<i class="fas fa-theater-masks"></i>
					</button>
					<button type="button" class="tab-button {{#if isMiscTabActive}}active{{/if}}" data-tab="misc" title="Misc">
						<i class="fas fa-sticky-note"></i>
					</button>
					<button type="button" class="tab-button {{#if isDebugTabActive}}active{{/if}}" data-tab="debug" title="Debug">
						<i class="fas fa-bug"></i>
					</button>
				</div>

				<!-- Tab Content -->
				<div class="tab-content">
					<!-- Stats Tab -->
					{{> sections/stats-section}}

					<!-- Circumstances Tab -->
					{{> sections/circumstances-section}}

					<!-- Feats Tab -->
					{{> sections/feats-section}}

					<!-- Equipment Tab -->
					{{> sections/equipment-section}}

					<!-- Actions Tab -->
					{{> sections/actions-section}}

					<!-- Arcane Tab -->
					{{> sections/arcane-section}}

					<!-- Divine Tab -->
					{{> sections/divine-section}}

					<!-- Personality Tab -->
					{{> sections/personality-section}}

					<!-- Misc Tab -->
					{{> sections/misc-section}}

					<!-- Debug Tab -->
					{{> sections/debug-section}}
				</div>
			</div>
			{{else}}
			<p>No character data imported yet. Use the Import button to load a character.</p>
			{{/if}}
		</section>
	</form>
</div>