{{!--
Feats Tab Section

Expected context:
- isFeatsTabActive: boolean
- featsData: The feats data
--}}
<div class="tab-panel {{#if isFeatsTabActive}}active{{/if}}" data-tab-panel="feats">
	{{#if featsData}}
	{{#if featsData.isEmpty}}
	<div class="feats-empty">
		<p>No feats assigned yet.</p>
	</div>
	{{else}}
	{{#if featsData.warnings.length}}
	<div class="feats-warnings">
		<i class="fas fa-exclamation-triangle"></i>
		<span>{{featsData.warnings.length}} warnings</span>
	</div>
	{{/if}}

	<div class="feats-content">
		{{#each featsData.featsOrSlotsByLevel}}
		<div class="feat-level">
			<h3 class="feat-level-title">Level {{level}}</h3>
			<div class="feats-grid {{#if (eq featsOrSlots.length 1)}}single-feat{{/if}}">
				{{#each featsOrSlots}}
				<div class="feat-box {{#if warning}}warning{{/if}} {{#if isEmpty}}empty{{/if}}">
					<div class="feat-header">
						<span class="feat-name">
							{{#if info}}
							{{info.name}}
							{{else}}
							{{#if slot}}
							Empty {{slot.name}}
							{{else}}
							Unknown Feat
							{{/if}}
							{{/if}}
						</span>
						{{#if warning}}
						<i class="fas fa-exclamation-triangle feat-warning-icon" title="{{warning}}"></i>
						{{/if}}
					</div>
					{{#if info}}
					{{#if info.feat}}
					{{#if info.feat.description}}
					<div class="feat-description">{{{processRichText info.description}}}</div>
					{{/if}}
					{{/if}}
					{{/if}}
				</div>
				{{/each}}
			</div>
		</div>
		{{/each}}
	</div>
	{{/if}}
	{{else}}
	<div class="feats-loading">
		<p>Loading feats...</p>
	</div>
	{{/if}}
</div>
